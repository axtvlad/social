(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[3],{103:function(e,t,n){"use strict";n.r(t);var i=n(23),o=n(24),r=n(26),c=n(25),a=n(1),s=n(0),l=n.n(s),u=n(3),j=n(90),b=n(95),d=n.n(b),p=n(89),f=function(e){var t=e.profileStatus,n=e.updateProfileStatus,i=Object(s.useState)(!1),o=Object(j.a)(i,2),r=o[0],c=o[1],l=Object(s.useState)(t),u=Object(j.a)(l,2),b=u[0],d=u[1];Object(s.useEffect)((function(){d(t)}),[t]);return Object(a.jsxs)("div",{children:[!r&&Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:Object(a.jsx)("span",{id:"profileStatus",onDoubleClick:function(){c(!0)},children:t||"----"})})}),r&&Object(a.jsx)("div",{children:Object(a.jsx)("input",{onChange:function(e){var t=e.target.value;d(t)},onBlur:function(){c(!1),n(b)},value:b,type:"text",autoFocus:!0})})]})},O=n(19),h=n(16),x=n(96),m=n.n(x),v=function(e){var t=e.onSubmit,n=e.profile,i=n.fullName,o=n.lookingForAJob,r=n.lookingForAJobDescription,c=n.aboutMe,s=n.contacts;return Object(a.jsx)(O.b,{onSubmit:t,children:function(e){return Object(a.jsxs)("form",{onSubmit:e.handleSubmit,name:"ProfileDataForm",className:m.a.gridFields,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Full name:"}),Object(a.jsx)(O.a,{name:"fullName",placeholder:"Full name",type:"text",component:"input",validate:h.c,initialValue:i})]}),Object(a.jsxs)("div",{className:m.a.checkbox,children:[Object(a.jsx)("span",{children:"Looking for a job?"}),Object(a.jsx)(O.a,{name:"lookingForAJob",placeholder:"Looking for a job?",type:"checkbox",component:"input",initialValue:o})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"My skills"}),Object(a.jsx)(O.a,{name:"lookingForAJobDescription",placeholder:"My skills",component:"textarea",validate:h.c,initialValue:r})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"About me"}),Object(a.jsx)(O.a,{name:"aboutMe",placeholder:"About me",component:"textarea",validate:h.c,initialValue:c})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("b",{children:"Contacts"}),":",Object.keys(s).map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:e}),Object(a.jsx)(O.a,{name:"contacts."+e,placeholder:e,type:"text",component:"input",initialValue:s[e]})]},e)}))]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})}})},P=n(97),g=n.n(P),y=function(e){var t=e.contactTitle,n=e.contactValue;return Object(a.jsxs)("div",{className:g.a.contact,children:[Object(a.jsx)("b",{children:t}),": ",Object(a.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:n})]})},S=function(e){var t=e.profile,n=e.editModeOn,i=e.isOwner,o=t.fullName,r=t.lookingForAJob,c=t.lookingForAJobDescription,s=t.aboutMe,l=t.contacts;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("b",{children:"Full name"}),": ",o]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("b",{children:"Looking for a job"}),": ",r?"yes":"no"]}),r&&Object(a.jsxs)("div",{children:[Object(a.jsx)("b",{children:"My skills"}),": ",c]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("b",{children:"About me"}),": ",s]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("b",{children:"Contacts"}),":",Object.keys(l).map((function(e){return Object(a.jsx)(y,{contactTitle:e,contactValue:l[e]},e)}))]}),i&&Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:n,children:"Edit user's data"})})]})},_=function(e){var t=e.profile,n=e.updateProfileStatus,i=e.profileStatus,o=e.isOwner,r=e.uploadPhoto,c=e.saveProfileData,l=Object(s.useState)(!1),u=Object(j.a)(l,2),b=u[0],O=u[1];return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:d.a.descriptionBloc,children:[Object(a.jsx)("img",{src:t.photos.large||p.a,alt:"avatar",className:d.a.avatar}),o&&Object(a.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files;t&&r(t[0])}}),o&&b?Object(a.jsx)(v,{onSubmit:function(e){c(e).then((function(){O(!1)}))},profile:t}):Object(a.jsx)(S,{editModeOn:function(){O(!0)},profile:t,isOwner:o}),Object(a.jsx)(f,{profileStatus:i,updateProfileStatus:n})]})})},k=n(40),F=n(18),A=n(98),N=n.n(A),D=function(e){var t=e.profile,n=e.message,i=e.likes;return Object(a.jsxs)("div",{className:N.a.posts,children:[Object(a.jsxs)("div",{className:N.a.item,children:[Object(a.jsx)("img",{className:N.a.ava,src:t&&t.photos.small?t.photos.small:p.a,alt:"ava"}),n]}),Object(a.jsx)("div",{children:Object(a.jsxs)("span",{children:["like ",i]})})]})},I=n(99),M=n.n(I),w=n(29),C=function(e){var t=e.onSubmit;return Object(a.jsx)(O.b,{onSubmit:t,children:function(e){return Object(a.jsxs)("form",{onSubmit:e.handleSubmit,name:"AddPostForm",children:[Object(a.jsx)("div",{children:Object(a.jsx)(O.a,{component:w.b,name:"postText",validate:Object(h.a)(h.c,Object(h.b)(300)),placeholder:"post msg"})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{children:"Add post"})})]})}})},J=l.a.memo((function(e){var t=e.posts,n=e.profile,i=e.addPost,o=Object(F.a)(t).reverse().map((function(e){return Object(a.jsx)(D,{profile:n,message:e.message,likes:e.likes,id:e.id},e.id)}));return Object(a.jsxs)("div",{className:M.a.postsBloc,children:[Object(a.jsx)("h3",{children:"my posts"}),Object(a.jsx)(C,{onSubmit:function(e){i(e.postText)}}),Object(a.jsx)("div",{className:M.a.posts,children:o})]})})),V=n(15),B=function(e){return e.profilePage.profile},T=function(e){return e.profilePage.profileStatus},U=function(e){return e.profilePage.posts},E=Object(V.b)((function(e){return{posts:U(e),profile:B(e)}}),{addPost:k.a})(J),L=n(39),R=function(e){return e.profile?Object(a.jsxs)("div",{children:[Object(a.jsx)(_,Object(u.a)({},e)),Object(a.jsx)(E,{})]}):Object(a.jsx)(L.a,{})},X=n(6),q=n(91),z=n(13),G=n(20),K=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).refreshProfile=function(){var t=e.props,n=t.match,i=t.currentUserId,o=t.history,r=t.getProfile,c=t.getProfileStatus,a=n.params.userId;a||(a=i)||o.push("/profile"),r(a),c(a)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){var e=this.props,t=e.profile,n=e.updateProfileStatus,i=e.profileStatus,o=e.match,r=e.uploadPhoto,c=e.saveProfileData;return Object(a.jsx)(R,{isOwner:!o.params.userId,profile:t,updateProfileStatus:n,profileStatus:i,uploadPhoto:r,saveProfileData:c})}}]),n}(l.a.Component);t.default=Object(z.d)(Object(V.b)((function(e){return{profile:B(e),currentUserId:Object(G.c)(e),profileStatus:T(e),isAuth:Object(G.a)(e)}}),{getProfile:k.b,getProfileStatus:k.c,updateProfileStatus:k.f,uploadPhoto:k.g,saveProfileData:k.e}),X.f,q.a)(K)},89:function(e,t,n){"use strict";t.a=n.p+"static/media/user.8d49e377.png"},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(41);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,r=void 0;try{for(var c,a=e[Symbol.iterator]();!(i=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);i=!0);}catch(s){o=!0,r=s}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}}(e,t)||Object(i.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(3),o=n(23),r=n(24),c=n(26),a=n(25),s=n(1),l=n(0),u=n.n(l),j=n(6),b=n(15),d=n(20),p=function(e){return{isAuth:Object(d.a)(e)}},f=function(e){var t=function(t){Object(c.a)(l,t);var n=Object(a.a)(l);function l(){return Object(o.a)(this,l),n.apply(this,arguments)}return Object(r.a)(l,[{key:"render",value:function(){return this.props.isAuth?Object(s.jsx)(e,Object(i.a)({},this.props)):Object(s.jsx)(j.a,{to:"/login"})}}]),l}(u.a.Component);return Object(b.b)(p)(t)}},95:function(e,t,n){e.exports={pic:"ProfileInfo_pic__1mRKR",descriptionBloc:"ProfileInfo_descriptionBloc__3Wn3N",avatar:"ProfileInfo_avatar__3xuFq"}},96:function(e,t,n){e.exports={gridFields:"ProfileDataForm_gridFields__1mXzU",checkbox:"ProfileDataForm_checkbox__2pU65"}},97:function(e,t,n){e.exports={contact:"Contact_contact__-jpbO"}},98:function(e,t,n){e.exports={item:"Post_item__ihtu9",posts:"Post_posts__144VX",ava:"Post_ava__2EGbS"}},99:function(e,t,n){e.exports={postsBloc:"MyPosts_postsBloc__Naxu4",posts:"MyPosts_posts__3tZ1c"}}}]);
//# sourceMappingURL=3.119812b2.chunk.js.map